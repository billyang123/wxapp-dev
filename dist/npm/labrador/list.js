"use strict";!function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){this.data=[],this.Component=t,this._refKey=e,this.map=n,this.props={};var o=this;this._refs={},["onLoad","onReady","onShow","onHide","onUnload","onPullDownRefreash"].forEach(function(e){t.prototype[e]&&(o[e]=function(){o["_"+e]=!0;var t=arguments;o.children.forEach(function(n){n[e].apply(n,t)})})})}var a=(t.exports={},e("../babel-runtime/core-js/object/assign.js")),r=n(a),i=e("../babel-runtime/core-js/object/keys.js"),s=n(i),p=e("../babel-runtime/core-js/json/stringify.js");n(p);o.prototype.setData=function(t,e){this.data[t]=e,this.parent.setData(this.key,this.data)},o.prototype._init=function(t,e){var n=this;n.key=t,n.parent=e,n.id=e.id+":"+t,t&&e&&e.path?n.path=e.path+"."+t:n.path=t,n.name=n.constructor.name||n.path,n.children=[],e._registerRef(n._refKey,"items",n)},o.prototype._createItem=function(t,e){var n=this,o=n.parent,a={},r=null;return(0,s.default)(this.map).forEach(function(t){var i=n.map[t];if("string"==typeof i){var s=i.substr(1);">>"===i?(i=e,n._refs[">"]||(n._refs[">"]=[]),n._refs[">"].push(t)):">"===i[0]?(i=e[s],n._refs[s]=t):"#"===i[0]&&(i=o[s],"function"==typeof i&&(i=function(){o[s].apply(o,[r].concat(Array.prototype.slice.call(arguments)))}))}a[t]=i}),a._item=e,r=new n.Component(a,!0),r._init(t,n),n._onLoad&&r.onLoad&&r.onLoad(),n._onReady&&r.onReady&&r.onReady(),r},o.prototype.onUpdate=function(t){function e(t){for(var e in n)if(n[e].props._item===t)return n.splice(e,1)[0]}var n=this.children,o=[],a=[];for(var i in t.items){var p=t.items[i],f=e(p);if(f){var h={};for(var c in this._refs){var u=this._refs[c];">"!==c?p[c]!==f.props[u]&&(h[u]=p[c]):u.forEach(function(t){h[t]=p})}(0,s.default)(h).length&&(h=(0,r.default)({},f.props,h),f.onUpdate&&f.onUpdate(h),f.props=h)}else f=this._createItem(i,p);i!=f.key&&f._setKey(i,this),o.push(f),a.push(f.data)}this.children=o,this.data=a,this.parent.setData(this.key,a),n.forEach(function(t){t.onUnload&&t.onUnload()})},t.exports=o}(module,require);
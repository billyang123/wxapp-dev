"use strict";!function(t,e){function r(t){return t&&t.__esModule?t:{default:t}}var a=(t.exports={},e("../babel-runtime/core-js/object/assign.js")),n=r(a),o=e("../babel-runtime/core-js/object/keys.js"),c=r(o),f=e("../babel-runtime/core-js/json/stringify.js"),s=(r(f),e("../babel-runtime/core-js/object/get-own-property-names.js")),i=r(s);t.exports=function(t){var e={},r=new t;e.data=r.data||{},e.name=t.name,(0,i.default)(t.prototype).forEach(function(r){"constructor"!==r&&(e[r]=t.prototype[r])});var a,o=e.onLoad,f=t.prototype.__lookupGetter__("children");return f||(a=r.children),e._dispatch=function(t){for(var e=this,r=t.currentTarget.dataset.path||"",a=t.currentTarget.dataset["bind"+t.type]||t.currentTarget.dataset["catch"+t.type];r;){var n=r.indexOf("."),o="";if(n===-1?(o=r,r=""):(o=r.substr(0,n),r=r.substr(n+1)),e=e.children[o],!e)return void console.error("Can not resolve component by path "+t.currentTarget.dataset.path)}return e[a]?e[a](t):void console.error("Can not resolve event handle "+t.currentTarget.dataset.path+"#"+a)},e.onLoad=function(){var t=this;t.id=t.__route__,t.onLoad=function(){},t.props={},f&&(a=f.call(t)),Object.defineProperty(t,"children",{value:a});var e=t.setData;if(t.setData=function(r,o){if("string"==typeof r){var f={};f[r]=o,r=f}if(e.call(t,r),a){var s=[];if((0,c.default)(r).forEach(function(e){t._refs[e]&&s.push(e)}),s.length){var i={};s.forEach(function(e){t._refs[e].forEach(function(t){var a=t[1];i[a.key]||(i[a.key]={}),i[a.key][t[0]]=r[e]})}),(0,c.default)(i).forEach(function(t){var e=a[t],r=(0,n.default)({},e.props,i[t]);e.onUpdate&&e.onUpdate(r),e.props=r})}}},a){t._refs={},t._registerRef=function(e,r,a){t._refs[e]||(t._refs[e]=[]),t._refs[e].push([r,a])};var r={};(0,c.default)(a).forEach(function(e){var n=a[e];n._init(e,t),r[e]=n.data}),this.setData(r);var s=[],i=["onReady","onShow","onHide","onUnload","onPullDownRefreash"];(0,c.default)(a).forEach(function(t){var e=a[t];e.onLoad&&e.onLoad(),i.forEach(function(t){s.indexOf(t)===-1&&e[t]&&s.push(t)})}),s.forEach(function(e){var r=t[e];t[e]=function(){(0,c.default)(a).forEach(function(t){var r=a[t];r[e]&&r[e].apply(r,arguments)}),r&&r.apply(this,arguments)}})}o&&o.apply(t,arguments)},e}}(module,require);
"use strict";!function(t,e){function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e){this._inList=!!e,this._props=t||{},this._refs={},this.props||(this.props={})}var o=(t.exports={},e("../babel-runtime/core-js/object/keys.js")),n=a(o),i=e("../babel-runtime/core-js/object/assign.js"),s=a(i),f=e("../babel-runtime/core-js/json/stringify.js");a(f);r.prototype.setData=function(t,e){var a=this;if("string"==typeof t){var r={};r[t]=e,t=r}this.data=(0,s.default)({},this.data,t),this.parent.setData(this.key,this.data);var o=this.children;if(o){var i=[];if((0,n.default)(t).forEach(function(t){a._refs[t]&&i.push(t)}),i.length){var f={};i.forEach(function(e){a._refs[e].forEach(function(a){var r=a[1];f[r.key]||(f[r.key]={}),f[r.key][a[0]]=t[e]})}),(0,n.default)(f).forEach(function(t){var e=o[t],a=(0,s.default)({},e.props,f[t]);e.onUpdate&&e.onUpdate(a),e.props=a})}}},r.prototype._registerRef=function(t,e,a){this._refs[t]||(this._refs[t]=[]),this._refs[t].push([e,a])},r.prototype._setKey=function(t,e){var a=this;a.key=t,a.parent=e,a.id=e.id+":"+t,t&&e&&e.path?a.path=e.path+"."+t:a.path=t,a.name=a.constructor.name||a.path},r.prototype._init=function(t,e){var a=this;a._setKey(t,e),a.data||(a.data={});var r=this.children||null;Object.defineProperty(this,"children",{value:r});var o=(0,s.default)({},this.props);if(a._props&&(0,n.default)(a._props).forEach(function(t){var r=a._props[t];if("string"==typeof r){var n=r.substr(1);"@"===r[0]?(r=e.data[n],e._registerRef(n,t,a)):"#"===r[0]&&(r=e[n],r="function"==typeof e[n]?function(){e[n].apply(e,arguments)}:e[n])}void 0!==r&&(o[t]=r)}),a.onUpdate&&(a.props={},a.onUpdate(o)),a.props=o,r){var i=[],f=["onLoad","onReady","onShow","onHide","onUnload","onPullDownRefreash"];(0,n.default)(r).forEach(function(t){var e=r[t];e._init(t,a),f.forEach(function(t){i.indexOf(t)===-1&&e[t]&&i.push(t)})}),a.setData(this.data),i.forEach(function(t){var e=a[t];a[t]=function(){(0,n.default)(r).forEach(function(e){var a=r[e];a[t]&&a[t].apply(a,arguments)}),e&&e.apply(this,arguments)}})}},t.exports=r.default=r}(module,require);
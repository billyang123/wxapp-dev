"use strict";!function(e,a){function t(e){return e&&e.__esModule?e:{default:e}}var n=e.exports={};window=a("../../npm/labrador/global.js");Object.defineProperty(n,"__esModule",{value:!0});var r=a("../../npm/babel-runtime/regenerator/index.js"),s=t(r),u=a("../../npm/babel-runtime/helpers/asyncToGenerator.js"),l=t(u),i=a("../../npm/babel-runtime/core-js/object/get-prototype-of.js"),o=t(i),c=a("../../npm/babel-runtime/helpers/classCallCheck.js"),d=t(c),p=a("../../npm/babel-runtime/helpers/createClass.js"),f=t(p),m=a("../../npm/babel-runtime/helpers/possibleConstructorReturn.js"),h=t(m),x=a("../../npm/babel-runtime/helpers/inherits.js"),b=t(x),v=a("../../npm/labrador/index.js"),k=t(v),w=function(e){function a(){var e,t,n,r;(0,d.default)(this,a);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return t=n=(0,h.default)(this,(e=a.__proto__||(0,o.default)(a)).call.apply(e,[this].concat(u))),n.data={index:"",url:"",value:"",txt:"",subUrl:"",nickName:"",email:"",arg:""},r=t,(0,h.default)(n,r)}return(0,b.default)(a,e),(0,f.default)(a,[{key:"onSub",value:function(){function e(e){return a.apply(this,arguments)}var a=(0,l.default)(s.default.mark(function e(a){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},!this.data.nickName){e.next=5;break}t={code:k.default.app.globalData.storage.code,nickName:this.data.nickName},e.next=13;break;case 5:if(!this.data.email){e.next=9;break}t={code:k.default.app.globalData.storage.code,email:this.data.email},e.next=13;break;case 9:if(""!=this.data.email){e.next=11;break}return e.abrupt("return",k.default.showModal({title:"提示",content:"邮箱不能为空！",showCancel:!1,success:function(e){}}));case 11:if(""!=this.data.nickName){e.next=13;break}return e.abrupt("return",k.default.showModal({title:"提示",content:"昵称不能为空！",showCancel:!1,success:function(e){}}));case 13:return e.next=15,k.default.request({url:this.data.subUrl,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:t});case 15:n=e.sent,0==n.data.status?k.default.navigateBack():k.default.showModal({title:"提示",content:n.data.msg,showCancel:!1,success:function(e){}});case 17:case"end":return e.stop()}},e,this)}));return e}()},{key:"onLoad",value:function(){function e(e){return a.apply(this,arguments)}var a=(0,l.default)(s.default.mark(function e(a){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(a.type),1==t?this.setData({url:"https://xcx.chinamuxie.com/wxapi/user/userInfo/nickname",subUrl:"https://xcx.chinamuxie.com/wxapi/user/userInfo/modifyNickName",value:"",txt:"昵称",placeholder:"昵称",email:null,index:t}):2==t&&this.setData({url:"https://xcx.chinamuxie.com/wxapi/user/userInfo/email",subUrl:"https://xcx.chinamuxie.com/wxapi/user/userInfo/modifyEmail",value:"",placeholder:"请输入您的邮箱",txt:"邮箱",nickName:null,index:t}),e.next=4,k.default.request({url:this.data.url,method:"GET",header:{"content-type":"application/x-www-form-urlencoded"},data:{code:k.default.app.globalData.storage.code}});case 4:n=e.sent,0==n.data.status?n.data.data?1==t?this.setData({nickName:n.data.data,value:n.data.data}):2==t&&this.setData({email:n.data.data,value:n.data.data}):this.setData({value:this.data.value}):k.default.showModal({title:"提示",content:n.data.data.msg,success:function(e){}});case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"bindKeyInput",value:function(e){var a=e.currentTarget.dataset.index;1==a?this.setData({nickName:e.detail.value}):2==a&&this.setData({email:e.detail.value})}}]),a}(k.default.Component);Page(v._createPage(w))}(module,require);
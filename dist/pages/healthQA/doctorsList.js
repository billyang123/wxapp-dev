"use strict";!function(e,t){function a(e){return e&&e.__esModule?e:{default:e}}var r=e.exports={};window=t("../../npm/labrador/global.js");Object.defineProperty(r,"__esModule",{value:!0});var n=t("../../npm/babel-runtime/regenerator/index.js"),s=a(n),i=t("../../npm/babel-runtime/helpers/asyncToGenerator.js"),u=a(i),o=t("../../npm/babel-runtime/core-js/object/get-prototype-of.js"),l=a(o),d=t("../../npm/babel-runtime/helpers/classCallCheck.js"),c=a(d),h=t("../../npm/babel-runtime/helpers/createClass.js"),f=a(h),p=t("../../npm/babel-runtime/helpers/possibleConstructorReturn.js"),g=a(p),b=t("../../npm/babel-runtime/helpers/inherits.js"),m=a(b),v=t("../../npm/labrador/index.js"),w=a(v),x=function(e){function t(){var e,a,r,n;(0,c.default)(this,t);for(var s=arguments.length,i=Array(s),u=0;u<s;u++)i[u]=arguments[u];return a=r=(0,g.default)(this,(e=t.__proto__||(0,l.default)(t)).call.apply(e,[this].concat(i))),r.data={id:"",size:5,page:0,hidden:!1,hasMore:!0,hasRefesh:!1,windowHieght:"",list:[],loading:!1},n=a,(0,g.default)(r,n)}return(0,m.default)(t,e),(0,f.default)(t,[{key:"getDoctorList",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(t){var a,r,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.data.loading){e.next=2;break}return e.abrupt("return");case 2:return this.data.loading=!0,e.next=5,w.default.app.ajax({url:"https://xcx.chinamuxie.com/wxapi/healthserv/doctor/list",data:{page:this.data.page,size:this.data.size}});case 5:if(a=e.sent,a.data){e.next=10;break}return this.setData({hasMore:!1,list:[],hidden:!0,hasRefesh:!1,loading:!1}),this.data.loading=!1,e.abrupt("return");case 10:r=!0,n=a.data.content,1!=a.data.totalPages&&a.data.totalPages!=this.data.page+1||(r=!1),this.setData({hasMore:r,list:this.data.list.concat(a.data.content),hidden:!0,hasRefesh:!1}),this.data.loading=!1;case 15:case"end":return e.stop()}},e,this)}));return e}()},{key:"loadMore",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("loadMore"),this.data.hasMore){e.next=3;break}return e.abrupt("return");case 3:return this.data.page++,e.next=6,this.getQAList();case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"onLoad",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.default.getSystemInfo();case 2:t=e.sent,this.setData({windowHieght:t.windowHeight}),this.getDoctorList();case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"onPullDownRefresh",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setData({hasMore:!0,page:0,list:[]}),e.next=3,this.getDoctorList();case 3:w.default.stopPullDownRefresh();case 4:case"end":return e.stop()}},e,this)}));return e}()}]),t}(w.default.Component);Page(v._createPage(x))}(module,require);
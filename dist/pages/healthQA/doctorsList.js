"use strict";!function(t,e){function a(t){return t&&t.__esModule?t:{default:t}}var r=t.exports={};window=e("../../npm/labrador/global.js");Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../npm/babel-runtime/regenerator/index.js"),s=a(n),i=e("../../npm/babel-runtime/helpers/asyncToGenerator.js"),u=a(i),o=e("../../npm/babel-runtime/core-js/object/get-prototype-of.js"),l=a(o),d=e("../../npm/babel-runtime/helpers/classCallCheck.js"),c=a(d),f=e("../../npm/babel-runtime/helpers/createClass.js"),h=a(f),p=e("../../npm/babel-runtime/helpers/possibleConstructorReturn.js"),g=a(p),b=e("../../npm/babel-runtime/helpers/inherits.js"),m=a(b),v=e("../../npm/labrador/index.js"),w=a(v),x=function(t){function e(){var t,a,r,n;(0,c.default)(this,e);for(var s=arguments.length,i=Array(s),u=0;u<s;u++)i[u]=arguments[u];return a=r=(0,g.default)(this,(t=e.__proto__||(0,l.default)(e)).call.apply(t,[this].concat(i))),r.data={id:"",size:20,page:0,hidden:!1,hasMore:!0,hasRefesh:!1,windowHieght:"",list:[],loading:!1},n=a,(0,g.default)(r,n)}return(0,m.default)(e,t),(0,h.default)(e,[{key:"getDoctorList",value:function(){function t(){return e.apply(this,arguments)}var e=(0,u.default)(s.default.mark(function t(){var e,a,r,n;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.data.loading){t.next=2;break}return t.abrupt("return");case 2:return this.data.loading=!0,t.next=5,w.default.app.ajax({url:w.default.app.data.ajaxPath+"/wxapi/healthserv/doctor/list",data:{page:this.data.page,size:this.data.size}});case 5:if(e=t.sent,e.data){t.next=10;break}return this.setData({hasMore:!1,list:[],hidden:!0,hasRefesh:!1,loading:!1}),this.data.loading=!1,t.abrupt("return");case 10:for(a=!0,r=e.data.content,(e.data.totalPages<=1||e.data.totalPages==this.data.page+1)&&(a=!1),n=0;n<r.length;n++)r[n].doctorHeadImgUrl=w.default.app.setHttpsUrl(r[n].doctorHeadImgUrl);this.setData({hasMore:a,list:this.data.list.concat(e.data.content),hidden:!0,hasRefesh:!1}),this.data.loading=!1;case 16:case"end":return t.stop()}},t,this)}));return t}()},{key:"loadMore",value:function(){function t(t){return e.apply(this,arguments)}var e=(0,u.default)(s.default.mark(function t(e){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.data.hasMore){t.next=2;break}return t.abrupt("return");case 2:return this.data.page++,t.next=5,this.getDoctorList();case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"onLoad",value:function(){function t(){return e.apply(this,arguments)}var e=(0,u.default)(s.default.mark(function t(){var e;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w.default.app.stopAudio(),t.next=3,w.default.getSystemInfo();case 3:e=t.sent,this.setData({windowHieght:e.windowHeight}),this.getDoctorList();case 6:case"end":return t.stop()}},t,this)}));return t}()},{key:"onShow",value:function(){}},{key:"onPullDownRefresh",value:function(){function t(){return e.apply(this,arguments)}var e=(0,u.default)(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.setData({hasMore:!0,page:0,list:[]}),t.next=3,this.getDoctorList();case 3:w.default.stopPullDownRefresh();case 4:case"end":return t.stop()}},t,this)}));return t}()}]),e}(w.default.Component);Page(v._createPage(x))}(module,require);
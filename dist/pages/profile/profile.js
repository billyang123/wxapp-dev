"use strict";!function(e,t){function a(e){return e&&e.__esModule?e:{default:e}}var r=e.exports={};window=t("../../npm/labrador/global.js");Object.defineProperty(r,"__esModule",{value:!0});var n=t("../../npm/babel-runtime/regenerator/index.js"),u=a(n),s=t("../../npm/babel-runtime/helpers/asyncToGenerator.js"),i=a(s),o=t("../../npm/babel-runtime/core-js/object/get-prototype-of.js"),d=a(o),l=t("../../npm/babel-runtime/helpers/classCallCheck.js"),c=a(l),f=t("../../npm/babel-runtime/helpers/createClass.js"),p=a(f),h=t("../../npm/babel-runtime/helpers/possibleConstructorReturn.js"),m=a(h),x=t("../../npm/babel-runtime/helpers/inherits.js"),w=a(x),b=t("../../npm/labrador/index.js"),v=a(b),g=function(e){function t(){var e,a,r,n;(0,c.default)(this,t);for(var u=arguments.length,s=Array(u),i=0;i<u;i++)s[i]=arguments[i];return a=r=(0,m.default)(this,(e=t.__proto__||(0,d.default)(t)).call.apply(e,[this].concat(s))),r.data={userNickname:"",userTrueName:"",userGender:"",userIdNumber:"",userPhone:"",userEmail:"",userHeadimgurl:"",active:"",sexm:"",sexw:"",sex:"男",chooseSex:"男"},n=a,(0,m.default)(r,n)}return(0,w.default)(t,e),(0,p.default)(t,[{key:"getData",value:function(){function e(){return t.apply(this,arguments)}var t=(0,i.default)(u.default.mark(function e(){var t,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.default.getUserInfo();case 2:return t=e.sent,e.next=5,v.default.request({url:v.default.app.data.ajaxPath+"/wxapi/user/userInfo/index",method:"GET",header:{"content-type":"application/x-www-form-urlencoded"},data:{code:v.default.app.globalData.storage.code}});case 5:a=e.sent,0==a.data.status&&this.setData({userNickname:a.data.data.userNickname,userTrueName:a.data.data.userTrueName,userGender:a.data.data.userGender,userIdNumber:a.data.data.userIdNumber,userPhone:a.data.data.userPhone,userEmail:a.data.data.userEmail,userHeadimgurl:a.data.data.userHeadimgurl||t.userInfo.avatarUrl});case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"linkTo",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,i.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isLink){e.next=2;break}return e.abrupt("return");case 2:return this.isLink=!0,e.next=5,v.default.navigateTo({url:t.currentTarget.dataset.link});case 5:this.isLink=!1;case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"choose",value:function(){function e(){return t.apply(this,arguments)}var t=(0,i.default)(u.default.mark(function e(){var t,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.default.request({url:v.default.app.data.ajaxPath+"/wxapi/user/userInfo/gender",method:"GET",header:{"content-type":"application/x-www-form-urlencoded"},data:{code:v.default.app.globalData.storage.code}});case 2:t=e.sent,0==t.data.status&&("男"==t.data.data?this.setData({sexm:t.data.data}):"女"==t.data.data?this.setData({sexw:t.data.data}):this.setData({sexm:"男"})),a=v.default.createAnimation({duration:300,timingFunction:"ease"}),this.animation=a,a.translateY(0).step(),this.setData({animationData:a.export()});case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"chooseSex",value:function(e){var t=e.currentTarget.id;if("sexm"==t)this.setData({sexm:t,sexw:null,chooseSex:"男"});else{if("sexw"!=t)return;this.setData({sexm:null,sexw:t,chooseSex:"女"})}}},{key:"chooseClose",value:function(){var e=v.default.createAnimation({duration:300,timingFunction:"ease"});this.animation=e,e.translateY("100%").step(),this.setData({animationData:e.export()})}},{key:"chooseSure",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,i.default)(u.default.mark(function e(t){var a,r,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.status){e.next=2;break}return e.abrupt("return");case 2:return this.status=!0,a={code:v.default.app.globalData.storage.code,gender:t.currentTarget.dataset.choose},e.next=6,v.default.request({url:v.default.app.data.ajaxPath+"/wxapi/user/userInfo/modifyGender",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:a});case 6:r=e.sent,0==r.data.status&&(this.setData({userGender:t.currentTarget.dataset.choose}),n=v.default.createAnimation({duration:300,timingFunction:"ease"}),this.animation=n,n.translateY("100%").step(),this.setData({animationData:n.export()})),this.status=!1;case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"quit",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,i.default)(u.default.mark(function e(t){var a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.status){e.next=2;break}return e.abrupt("return");case 2:return this.status=!0,e.next=5,v.default.request({url:v.default.app.data.ajaxPath+"/wxapi/user/logout",method:"GET",header:{"content-type":"application/x-www-form-urlencoded"},data:{code:v.default.app.globalData.storage.code}});case 5:a=e.sent,0==a.data.status&&(v.default.clearStorage(),v.default.switchTab({url:"/pages/account/account"})),this.status=!1;case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"onShow",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,i.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.getData();case 1:case"end":return e.stop()}},e,this)}));return e}()}]),t}(v.default.Component);Page(b._createPage(g))}(module,require);
"use strict";!function(e,a){function t(e){return e&&e.__esModule?e:{default:e}}var n=e.exports={};window=a("../../npm/labrador/global.js");Object.defineProperty(n,"__esModule",{value:!0});var r=a("../../npm/babel-runtime/regenerator/index.js"),o=t(r),u=a("../../npm/babel-runtime/helpers/asyncToGenerator.js"),s=t(u),l=a("../../npm/babel-runtime/core-js/object/get-prototype-of.js"),i=t(l),f=a("../../npm/babel-runtime/helpers/classCallCheck.js"),p=t(f),c=a("../../npm/babel-runtime/helpers/createClass.js"),d=t(c),b=a("../../npm/babel-runtime/helpers/possibleConstructorReturn.js"),h=t(b),g=a("../../npm/babel-runtime/helpers/inherits.js"),m=t(g),v=a("../../npm/labrador/index.js"),k=t(v),x=a("../../components/navbar/navbar.js"),j=t(x),y=function(e){function a(){var e,t,n,r;(0,p.default)(this,a);for(var o=arguments.length,u=Array(o),s=0;s<o;s++)u[s]=arguments[s];return t=n=(0,h.default)(this,(e=a.__proto__||(0,i.default)(a)).call.apply(e,[this].concat(u))),n.data={login:!1,userInfo:{},assetsPath:k.default.app.data.assetsPath,wxUserInfo:k.default.app.globalData.userInfo},n.children={navbar:new j.default({cur:2})},r=t,(0,h.default)(n,r)}return(0,m.default)(a,e),(0,d.default)(a,[{key:"linkTo",value:function(){function e(e){return a.apply(this,arguments)}var a=(0,s.default)(o.default.mark(function e(a){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this,!this.isLink){e.next=3;break}return e.abrupt("return");case 3:if(this.isLink=!0,this.data.login){e.next=9;break}return e.next=7,k.default.app.doLogin(function(e){t.setData({login:!0,userInfo:e.data}),k.default.navigateTo({url:a.currentTarget.dataset.link})});case 7:e.next=11;break;case 9:return e.next=11,k.default.navigateTo({url:a.currentTarget.dataset.link});case 11:this.isLink=!1;case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"bindLogin",value:function(){function e(){return a.apply(this,arguments)}var a=(0,s.default)(o.default.mark(function e(){var a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=this,k.default.app.doLogin(function(e,t){a.setData({login:!0,userInfo:e.data,wxUserInfo:t})});case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"json2Form",value:function(e){var a=[];for(var t in e)a.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return a.join("&")}},{key:"makePhoneCall",value:function(e){k.default.app.makePhoneCall(e)}},{key:"onLoad",value:function(){function e(){return a.apply(this,arguments)}var a=(0,s.default)(o.default.mark(function e(){var a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(k.default.app.globalData),k.default.app.globalData.storage.code){e.next=5;break}this.setData({login:!1}),e.next=9;break;case 5:return e.next=7,k.default.app.getUser(k.default.app.globalData.storage.code);case 7:a=e.sent,a.data.loginStatus?this.setData({login:!0,userInfo:a.data,wxUserInfo:k.default.app.globalData.userInfo}):this.setData({login:!1});case 9:case"end":return e.stop()}},e,this)}));return e}()}]),a}(k.default.Component);Page(v._createPage(y))}(module,require);
"use strict";!function(t,a){function e(t){return t&&t.__esModule?t:{default:t}}var r=t.exports={};Object.defineProperty(r,"__esModule",{value:!0});var s=a("../../npm/babel-runtime/regenerator/index.js"),u=e(s),i=a("../../npm/babel-runtime/helpers/asyncToGenerator.js"),n=e(i),d=a("../../npm/babel-runtime/core-js/object/get-prototype-of.js"),o=e(d),l=a("../../npm/babel-runtime/helpers/classCallCheck.js"),p=e(l),c=a("../../npm/babel-runtime/helpers/createClass.js"),h=e(c),f=a("../../npm/babel-runtime/helpers/possibleConstructorReturn.js"),b=e(f),m=a("../../npm/babel-runtime/helpers/inherits.js"),y=e(m),x=a("../../npm/labrador/index.js"),v=e(x),k=function(t){function a(){var t,e,r,s;(0,p.default)(this,a);for(var u=arguments.length,i=Array(u),n=0;n<u;n++)i[n]=arguments[n];return e=r=(0,b.default)(this,(t=a.__proto__||(0,o.default)(a)).call.apply(t,[this].concat(i))),r.data={list:[],playAudio:{id:null,src:null},audio:{},praiseNum:{}},r.props={list:[]},s=e,(0,b.default)(r,s)}return(0,y.default)(a,t),(0,h.default)(a,[{key:"onUpdate",value:function(t){this.setData({list:t.list})}},{key:"audioPlay",value:function(t){}},{key:"audioPlayEnd",value:function(t){var a=t.currentTarget.dataset.id;this.data.audio[a].status=!1,this.setData({audio:this.data.audio})}},{key:"bindAudio",value:function(){function t(t){return a.apply(this,arguments)}var a=(0,n.default)(u.default.mark(function t(a){var e,r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=a.currentTarget.dataset.url,r=a.currentTarget.dataset.id,this.data.audio[r]||(this.data.audio[r]={id:r,src:e,status:!1}),this.data.playAudio.src==e){t.next=11;break}return this.data.playAudio.id&&(this.data.audio[this.data.playAudio.id].status=!1,this.setData({audio:this.data.audio})),this.data.audio[r].status=!0,t.next=8,v.default.playBackgroundAudio({dataUrl:e});case 8:this.setData({audio:this.data.audio,playAudio:{id:r,src:e}}),t.next=21;break;case 11:if(!this.data.audio[r].status){t.next=17;break}return t.next=14,v.default.pauseBackgroundAudio();case 14:this.data.audio[r].status=!1,t.next=20;break;case 17:return t.next=19,v.default.playBackgroundAudio({dataUrl:e});case 19:this.data.audio[r].status=!0;case 20:this.setData({audio:this.data.audio});case 21:case"end":return t.stop()}},t,this)}));return t}()},{key:"praise",value:function(){function t(t){return a.apply(this,arguments)}var a=(0,n.default)(u.default.mark(function t(a){var e,r,s,i,n;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=a.currentTarget.dataset.index,r=a.currentTarget.dataset.id,s=r+"_"+e,console.log(s),!(this.praiseTmp.indexOf(s)>=0)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,v.default.app.ajax({url:"https://xcx.chinamuxie.com/wxapi/healthserv/qa/praise",type:"post",data:{qaId:r}});case 8:i=t.sent,0==i.status&&(n=this.data.list,n[parseInt(e)].praiseNumber+=1,n[parseInt(e)].praiseed=!0,this.setData({list:n}),this.praiseTmp.push(s));case 10:case"end":return t.stop()}},t,this)}));return t}()}]),a}(v.default.Component);r.default=k}(module,require);